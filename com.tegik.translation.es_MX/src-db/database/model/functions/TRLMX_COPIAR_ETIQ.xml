<?xml version="1.0"?>
  <database name="FUNCTION TRLMX_COPIAR_ETIQ">
    <function name="TRLMX_COPIAR_ETIQ" type="VARCHAR">
      <body><![CDATA[V_Record RECORD;

BEGIN


--buscar todos los modulos que sean de tegik y sean en espaÃ±ol de mexico
FOR V_Record IN (SELECT ad_module_id, javapackage FROM AD_MODULE
		WHERE javapackage LIKE '%tegik%' AND ad_language = 'es_MX')
LOOP

DBMS_OUTPUT.PUT_LINE( V_Record.javapackage);


DBMS_OUTPUT.PUT_LINE( '........AD_FIELD_TRL');
--Copia las field_trl 
UPDATE  AD_FIELD AS o
SET name = (SELECT name FROM AD_FIELD_TRL tr WHERE o.AD_FIELD_ID = tr.AD_FIELD_ID AND AD_LANGUAGE='es_MX' )
 WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM AD_FIELD_TRL tr WHERE o.AD_FIELD_ID = tr.AD_FIELD_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;


DBMS_OUTPUT.PUT_LINE( '.......AD_FIELDGROUP_TRL');
--Copia las fieldgroup_trl 
UPDATE   AD_FIELDGROUP  AS o
SET name =(SELECT name FROM AD_FIELDGROUP_TRL tr WHERE o.AD_FIELDGROUP_ID = tr.AD_FIELDGROUP_ID AND AD_LANGUAGE='es_MX' )
 WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM AD_FIELDGROUP_TRL tr WHERE o.AD_FIELDGROUP_ID = tr.AD_FIELDGROUP_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;


DBMS_OUTPUT.PUT_LINE( '........AD_FORM_TRL');
--Copia las form_trl 
UPDATE  AD_FORM AS o
SET name =(SELECT name FROM AD_FORM_TRL tr WHERE o.AD_FORM_ID = tr.AD_FORM_ID AND AD_LANGUAGE='es_MX' )
 WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM AD_FORM_TRL tr WHERE o.AD_FORM_ID = tr.AD_FORM_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;



DBMS_OUTPUT.PUT_LINE( '........AD_MENU_TRL');
--Copia las menu_trl 
UPDATE  AD_MENU AS o 
SET name =(SELECT name FROM AD_MENU_TRL tr WHERE o.AD_MENU_ID = tr.AD_MENU_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM AD_MENU_TRL tr WHERE o.AD_MENU_ID = tr.AD_MENU_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;

 

DBMS_OUTPUT.PUT_LINE( '........AD_MESSAGE_TRL');
--Copia las message_trl 
UPDATE  AD_MESSAGE AS o 
SET msgtext=(SELECT msgtext FROM AD_MESSAGE_TRL tr WHERE o.AD_MESSAGE_ID = tr.AD_MESSAGE_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT msgtext FROM AD_MESSAGE_TRL tr WHERE o.AD_MESSAGE_ID = tr.AD_MESSAGE_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;




DBMS_OUTPUT.PUT_LINE( '........AD_PROCESS_TRL');
--Copia las process_trl 
UPDATE AD_PROCESS AS o 
SET name =(SELECT name FROM AD_PROCESS_TRL tr WHERE o.AD_PROCESS_ID = tr.AD_PROCESS_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM AD_PROCESS_TRL tr WHERE o.AD_PROCESS_ID = tr.AD_PROCESS_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;



DBMS_OUTPUT.PUT_LINE( '........AD_PROCESS_PARA_TR');
--Copia process_para_trl
UPDATE  AD_PROCESS_PARA AS o
SET name =(SELECT name FROM AD_PROCESS_PARA_TRL tr WHERE o.AD_PROCESS_PARA_ID = tr.AD_PROCESS_PARA_ID AND AD_LANGUAGE='es_MX' )
WHERE AD_PROCESS_PARA_ID IN 
	(SELECT pa.AD_PROCESS_PARA_ID FROM AD_PROCESS_PARA pa
	INNER JOIN AD_PROCESS p ON p.ad_process_id = pa.ad_process_id  
	WHERE p.AD_MODULE_ID=V_Record.ad_module_id)
AND (SELECT name FROM AD_PROCESS_PARA_TRL tr WHERE o.AD_PROCESS_PARA_ID = tr.AD_PROCESS_PARA_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;



DBMS_OUTPUT.PUT_LINE( '........AD_REFERENCE_TRL');
--Copia  reference_trl 
UPDATE AD_REFERENCE AS o 
SET name =(SELECT name FROM AD_REFERENCE_TRL tr WHERE o.AD_REFERENCE_ID = tr.AD_REFERENCE_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM AD_REFERENCE_TRL tr WHERE o.AD_REFERENCE_ID = tr.AD_REFERENCE_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;



DBMS_OUTPUT.PUT_LINE( '........AD_REF_LIST_TRL');
--Copia  ref_list_trl 
UPDATE AD_REF_LIST AS o
SET name =(SELECT name FROM AD_REFERENCE_TRL tr WHERE o.AD_REFERENCE_ID = tr.AD_REFERENCE_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM AD_REFERENCE_TRL tr WHERE o.AD_REFERENCE_ID = tr.AD_REFERENCE_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;




DBMS_OUTPUT.PUT_LINE( '........AD_TAB_TRL');
--Copia  tab_trl 
UPDATE  AD_TAB  AS o
SET name =(SELECT name FROM AD_TAB_TRL tr WHERE o.AD_TAB_ID = tr.AD_TAB_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM AD_TAB_TRL tr WHERE o.AD_TAB_ID = tr.AD_TAB_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;




DBMS_OUTPUT.PUT_LINE( '........AD_TEXTINTERFACES_TRL');
--Copia  textinterfaces_trl 
UPDATE AD_TEXTINTERFACES AS o 
SET text =(SELECT text FROM AD_TEXTINTERFACES_TRL tr WHERE o.AD_TEXTINTERFACES_ID = tr.AD_TEXTINTERFACES_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT text FROM AD_TEXTINTERFACES_TRL tr WHERE o.AD_TEXTINTERFACES_ID = tr.AD_TEXTINTERFACES_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;



DBMS_OUTPUT.PUT_LINE( '........AD_WINDOW_TRL');
--Copia  window_trl 
UPDATE  AD_WINDOW AS o
SET name =(SELECT name FROM AD_WINDOW_TRL tr WHERE o.AD_WINDOW_ID = tr.AD_WINDOW_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM AD_WINDOW_TRL tr WHERE o.AD_WINDOW_ID = tr.AD_WINDOW_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;




DBMS_OUTPUT.PUT_LINE( '........OBUIAPP_PARAMETER_TRL ');
--Copia  OBUIAPP_PARAMETER 
UPDATE  OBUIAPP_PARAMETER AS o
SET name =(SELECT name FROM OBUIAPP_PARAMETER_TRL tr WHERE o.OBUIAPP_PARAMETER_ID = tr.OBUIAPP_PARAMETER_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM OBUIAPP_PARAMETER_TRL tr WHERE o.OBUIAPP_PARAMETER_ID = tr.OBUIAPP_PARAMETER_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;



DBMS_OUTPUT.PUT_LINE( '........OBCQL_QUERY_COLUMN_TRL');
--Copia  OBCQL_QUERY_COLUMN 
UPDATE OBCQL_QUERY_COLUMN AS o 
SET name =(SELECT name FROM OBCQL_QUERY_COLUMN_TRL tr WHERE o.OBCQL_QUERY_COLUMN_ID = tr.OBCQL_QUERY_COLUMN_ID AND AD_LANGUAGE='es_MX' )
WHERE OBCQL_QUERY_COLUMN_ID IN 
	  (SELECT OBCQL_QUERY_COLUMN_ID FROM OBCQL_QUERY_COLUMN c
	  INNER JOIN OBCQL_WIDGET_QUERY w ON w.OBCQL_WIDGET_QUERY_ID = c.OBCQL_WIDGET_QUERY_ID
	  INNER JOIN OBKMO_WIDGET_CLASS wc ON w.OBKMO_WIDGET_CLASS_ID = wc.OBKMO_WIDGET_CLASS_ID
	    WHERE  wc.AD_MODULE_ID=V_Record.ad_module_id)
AND (SELECT name FROM OBCQL_QUERY_COLUMN_TRL tr WHERE o.OBCQL_QUERY_COLUMN_ID = tr.OBCQL_QUERY_COLUMN_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;



DBMS_OUTPUT.PUT_LINE( '........OBUISEL_SELECTOR_FIELD_TRL');
--Copia  OBUISEL_SELECTOR_FIELD
UPDATE  OBUISEL_SELECTOR_FIELD AS o
SET name =(SELECT name FROM OBUISEL_SELECTOR_FIELD_TRL tr WHERE o.OBUISEL_SELECTOR_FIELD_ID = tr.OBUISEL_SELECTOR_FIELD_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT name FROM OBUISEL_SELECTOR_FIELD_TRL tr WHERE o.OBUISEL_SELECTOR_FIELD_ID = tr.OBUISEL_SELECTOR_FIELD_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;




DBMS_OUTPUT.PUT_LINE( '........OBKMO_WIDGET_CLASS_MENU_TRL');
--Copia  OBKMO_WIDGET_CLASS_MENU
UPDATE   OBKMO_WIDGET_CLASS_MENU AS o
SET title =(SELECT title FROM OBKMO_WIDGET_CLASS_MENU_TRL tr WHERE o.OBKMO_WIDGET_CLASS_MENU_ID = tr.OBKMO_WIDGET_CLASS_MENU_ID AND AD_LANGUAGE='es_MX' )
WHERE OBKMO_WIDGET_CLASS_MENU_ID IN 
	(SELECT OBKMO_WIDGET_CLASS_MENU_ID FROM OBKMO_WIDGET_CLASS_MENU m
	  INNER JOIN OBKMO_WIDGET_CLASS c ON m.OBKMO_WIDGET_CLASS_ID= c.OBKMO_WIDGET_CLASS_ID 
	    WHERE AD_MODULE_ID=V_Record.ad_module_id)
AND (SELECT title FROM OBKMO_WIDGET_CLASS_MENU_TRL tr WHERE o.OBKMO_WIDGET_CLASS_MENU_ID = tr.OBKMO_WIDGET_CLASS_MENU_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;



DBMS_OUTPUT.PUT_LINE( '........OBKMO_WIDGET_CLASS');
--Elimina  OBKMO_WIDGET_CLASS
UPDATE OBKMO_WIDGET_CLASS AS o
SET title =(SELECT title FROM OBKMO_WIDGET_CLASS_TRL tr WHERE o.OBKMO_WIDGET_CLASS_ID = tr.OBKMO_WIDGET_CLASS_ID AND AD_LANGUAGE='es_MX' )
WHERE o.AD_MODULE_ID=V_Record.ad_module_id
AND (SELECT title FROM OBKMO_WIDGET_CLASS_TRL tr WHERE o.OBKMO_WIDGET_CLASS_ID = tr.OBKMO_WIDGET_CLASS_ID AND AD_LANGUAGE='es_MX' ) IS NOT NULL;




END LOOP;


RETURN 'TERMINO EXITOSAMENTE';
END TRLMX_COPIAR_ETIQ
]]></body>
    </function>
  </database>
