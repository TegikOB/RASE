<?xml version="1.0"?>
  <database name="FUNCTION TRLMX_ELIMINAR_ETIQ">
    <function name="TRLMX_ELIMINAR_ETIQ" type="VARCHAR">
      <body><![CDATA[V_Record RECORD;

BEGIN


--buscar todos los modulos que sean de tegik y sean en espaÃ±ol de mexico
FOR V_Record IN (SELECT ad_module_id, javapackage FROM AD_MODULE
		WHERE javapackage LIKE '%tegik%' AND ad_language = 'es_MX')
LOOP

DBMS_OUTPUT.PUT_LINE( V_Record.javapackage);


DBMS_OUTPUT.PUT_LINE( '........AD_FIELD_TRL');
--Elimina las field_trl 
DELETE FROM  AD_FIELD_TRL 
WHERE AD_FIELD_ID IN 
	(SELECT AD_FIELD_ID 
	FROM AD_FIELD WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';


DBMS_OUTPUT.PUT_LINE( '.......AD_FIELDGROUP_TRL');
--Elimina las fieldgroup_trl 
DELETE FROM  AD_FIELDGROUP_TRL 
WHERE AD_FIELDGROUP_ID IN 
	(SELECT AD_FIELDGROUP_ID 
	FROM AD_FIELDGROUP WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';


DBMS_OUTPUT.PUT_LINE( '........AD_FORM_TRL');
--Elimina las form_trl 
DELETE FROM  AD_FORM_TRL 
WHERE AD_FORM_ID IN 
	(SELECT AD_FORM_ID 
	FROM AD_FORM WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';


DBMS_OUTPUT.PUT_LINE( '........AD_MENU_TRL');
--Elimina las menu_trl 
DELETE FROM  AD_MENU_TRL 
WHERE AD_MENU_ID IN 
	(SELECT AD_MENU_ID 
	FROM AD_MENU WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';


DBMS_OUTPUT.PUT_LINE( '........AD_MESSAGE_TRL');
--Elimina las message_trl 
DELETE FROM  AD_MESSAGE_TRL 
WHERE AD_MESSAGE_ID IN 
	(SELECT AD_MESSAGE_ID 
	FROM AD_MESSAGE WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';



DBMS_OUTPUT.PUT_LINE( '........AD_PROCESS_TRL');
--Elimina las process_trl 
DELETE FROM  AD_PROCESS_TRL 
WHERE AD_PROCESS_ID IN 
	(SELECT AD_PROCESS_ID 
	FROM AD_PROCESS WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';


DBMS_OUTPUT.PUT_LINE( '........AD_PROCESS_PARA_TR');
--Elimina process_para_trl
DELETE FROM  AD_PROCESS_PARA_TRL 
WHERE AD_PROCESS_PARA_ID IN 
	(SELECT pa.AD_PROCESS_PARA_ID FROM AD_PROCESS_PARA pa
	INNER JOIN AD_PROCESS p ON p.ad_process_id = pa.ad_process_id  
	WHERE p.AD_MODULE_ID=V_Record.ad_module_id) AND AD_LANGUAGE='es_MX';


DBMS_OUTPUT.PUT_LINE( '........AD_REFERENCE_TRL');
--Elimina  reference_trl 
DELETE FROM  AD_REFERENCE_TRL 
WHERE AD_REFERENCE_ID IN 
	(SELECT AD_REFERENCE_ID 
	FROM AD_REFERENCE WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';



DBMS_OUTPUT.PUT_LINE( '........AD_REF_LIST_TRL');
--Elimina  ref_list_trl 
DELETE FROM  AD_REF_LIST_TRL 
WHERE AD_REF_LIST_ID IN 
	(SELECT AD_REF_LIST_ID 
	FROM AD_REF_LIST WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';



DBMS_OUTPUT.PUT_LINE( '........AD_TAB_TRL');
--Elimina  tab_trl 
DELETE FROM  AD_TAB_TRL 
WHERE AD_TAB_ID IN 
	(SELECT AD_TAB_ID 
	FROM AD_TAB WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';


DBMS_OUTPUT.PUT_LINE( '........AD_TEXTINTERFACES_TRL');
--Elimina  textinterfaces_trl 
DELETE FROM  AD_TEXTINTERFACES_TRL 
WHERE AD_TEXTINTERFACES_ID IN 
	(SELECT AD_TEXTINTERFACES_ID 
	FROM AD_TEXTINTERFACES WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';



DBMS_OUTPUT.PUT_LINE( '........AD_WINDOW_TRL');
--Elimina  window_trl 
DELETE FROM  AD_WINDOW_TRL 
WHERE AD_WINDOW_ID IN 
	(SELECT AD_WINDOW_ID 
	FROM AD_WINDOW WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';



DBMS_OUTPUT.PUT_LINE( '........OBUIAPP_PARAMETER_TRL ');
--Elimina  OBUIAPP_PARAMETER 
DELETE FROM  OBUIAPP_PARAMETER_TRL 
WHERE OBUIAPP_PARAMETER_ID IN 
	(SELECT OBUIAPP_PARAMETER_ID 
	FROM OBUIAPP_PARAMETER WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';



DBMS_OUTPUT.PUT_LINE( '........OBCQL_QUERY_COLUMN_TRL');
--Elimina  OBCQL_QUERY_COLUMN 
DELETE FROM  OBCQL_QUERY_COLUMN_TRL 
WHERE OBCQL_QUERY_COLUMN_ID IN 
	  (SELECT OBCQL_QUERY_COLUMN_ID FROM OBCQL_QUERY_COLUMN c
	  INNER JOIN OBCQL_WIDGET_QUERY w ON w.OBCQL_WIDGET_QUERY_ID = c.OBCQL_WIDGET_QUERY_ID
	  INNER JOIN OBKMO_WIDGET_CLASS wc ON w.OBKMO_WIDGET_CLASS_ID = wc.OBKMO_WIDGET_CLASS_ID
	    WHERE  wc.AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';



DBMS_OUTPUT.PUT_LINE( '........OBUISEL_SELECTOR_FIELD_TRL');
--Elimina  OBUISEL_SELECTOR_FIELD
DELETE FROM  OBUISEL_SELECTOR_FIELD_TRL 
WHERE OBUISEL_SELECTOR_FIELD_ID IN 
	(SELECT OBUISEL_SELECTOR_FIELD_ID 
	FROM OBUISEL_SELECTOR_FIELD WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';




DBMS_OUTPUT.PUT_LINE( '........OBKMO_WIDGET_CLASS_MENU_TRL');
--Elimina  OBKMO_WIDGET_CLASS_MENU
DELETE FROM  OBKMO_WIDGET_CLASS_MENU_TRL 
WHERE OBKMO_WIDGET_CLASS_MENU_ID IN 
	(SELECT OBKMO_WIDGET_CLASS_MENU_ID FROM OBKMO_WIDGET_CLASS_MENU m
	  INNER JOIN OBKMO_WIDGET_CLASS c ON m.OBKMO_WIDGET_CLASS_ID= c.OBKMO_WIDGET_CLASS_ID 
	    WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';



DBMS_OUTPUT.PUT_LINE( '........OBKMO_WIDGET_CLASS');
--Elimina  OBKMO_WIDGET_CLASS
DELETE FROM OBKMO_WIDGET_CLASS_TRL 
WHERE OBKMO_WIDGET_CLASS_ID IN 
	(SELECT OBKMO_WIDGET_CLASS_ID 
	FROM OBKMO_WIDGET_CLASS WHERE AD_MODULE_ID=V_Record.ad_module_id) 
	AND AD_LANGUAGE='es_MX';



END LOOP;


RETURN 'TERMINO EXITOSAMENTE';
END TRLMX_ELIMINAR_ETIQ
]]></body>
    </function>
  </database>
